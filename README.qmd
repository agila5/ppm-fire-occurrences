---
format: gfm
---
```{r}
#| include: false
options(width = 100)
```

## README

This repository is associated with the paper *Non-separable spatio-temporal Poisson point process models for fire occurrences* by Nicoletta D'Angelo, Alessandro Albano, Andrea Gilardi, and Giada Adelfio. It contains the code and the data necessary to reproduce the analyses presented in the manuscript. 

In particular: 

* The `R` code used to create the exploratory analyses included in Sections 2 and 4 and estimate the model detailed in Section 3 can be found in `summary.R`. 
* The file `summary.html` (generated by `summary.qmd`) contains a notebook-like summary of the analyses in HTML format which already includes all code and figures. 
* The `data` (~1.5GB) can be downloaded from the data-release of this repository using the following code: 
```{r}
#| eval: false
library(piggyback)
data_names <- c(
  "DL_FIRE_J1V-C2_510187.zip", "confini-regioni.zip", "land-use.zip", "NDVI.zip",
  "environmental-variables.zip", "INGV-elev.zip"
)
pb_download(
  file = data_names,
  dest = tempdir(), # Specify the path where you want to save the data
  repo = "agila5/ppm-fire-occurrences",
  tag = "v1-data",
  overwrite = TRUE,
  show_progress = TRUE
)
```
A small variation of this code chunk is already included in `summary.R` and `summary.html`. 

* We have already cached the long running computations in the `qcache` folder using the `qs::qcache` function. This folder is not fully included in the Github repository, but `summary.R` and `summary.html` include the relevant code to download the missing objects from the data-release of this folder. Feel free to remove the cache directory or the `qs::qcache` function from the code if you want to re-run such long computations.

* Finally, we have also prepared a [Github Codespace](https://github.com/features/codespaces) that can be used to automatically set-up an Rstudio Server and explore the code and the data in an interactive way.   

Instructions to access the Github Codespace^[Please note that you need a Github account to access the Github Codespace.]: 

1. Click on the following link to set-up your own version of the Codespace: <https://codespaces.new/agila5/ppm-fire-occurrences>. **Warning:** the `Machine type` option needs to be set equal to `4-core`. 
2. Click on the green button named `Create codespace`. 
![](istruzioni/step1.png){fig-align=center fig-width=70%}
3. Wait for the Codespace to be created. This operation takes approximately 5/10 minutes. At the end you should see something like: 
![](istruzioni/step2.png){fig-align=center fig-width=70%}
4. Click on the `Ports` tab (which is highlighted in the previous image). You will see something like
![](istruzioni/step3.png){fig-align=center fig-width=70%}
5. Drag the mouse over the Forwarded Addresses field in the 8787 port and click on the globe icon (as displayed in the previous image). This will open a new tab in your browser with the Rstudio Server interface.
![](istruzioni/step4.png){fig-align=center fig-width=70%}
6. Login into the Rstudio server using the following credentials: 
    - Username: `rstudio`
    - Password: `rstudio`
7. These operations will create an Rstudio session in your browser. Now you can explore the code and the data interactively!

**Warning:** Please notice that 

> GitHub Codespaces is paid for either by an organization, an enterprise, or a personal account. The Free and Pro plans for personal accounts include free use of GitHub Codespaces up to a fixed amount of usage every month.

We refer to the [official docs](https://docs.github.com/en/billing/managing-billing-for-your-products/managing-billing-for-github-codespaces/about-billing-for-github-codespaces) for more details. 